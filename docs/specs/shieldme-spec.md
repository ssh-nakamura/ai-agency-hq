# 誹謗中傷検知SaaS：MVP仕様書 v1.1

## 1. プロダクト概要

### コンセプト

**「ポジティブを届け、ネガティブから守るAI」**

エゴサの苦痛を代行するだけでなく、**ポジティブなフィードバックを前面に出し**、ネガティブなものは**要約・抽象化して直接見せない**ことで、クリエイターのメンタルを守るSaaS。

### コアバリュー

| 従来のエゴサ | 本サービス |
|-------------|-----------|
| 全部自分で見る → 傷つく | AIが代わりに見る → 守られる |
| ネガティブも直接目に入る | 抽象化された要約のみ |
| 良いコメントも埋もれる | ポジティブを前面に表示 |
| 一人で抱え込む | AIカウンセラーに相談できる |

### ターゲットユーザー

- マイクロインフルエンサー（フォロワー1万〜10万）
- YouTuber、配信者、クリエイター
- 炎上リスクのある発信者

---

## 2. UXコンセプト

### 画面遷移の設計思想

```
┌─────────────────────────────────────────────────────────┐
│                                                         │
│   😊 ポジティブダッシュボード（デフォルト表示）          │
│   「あなたへの応援メッセージ」                          │
│                                                         │
│   ↓ 必要な人だけアクセス                                │
│                                                         │
│   🛡️ ネガティブレポート（オプション）                   │
│   「要約のみ。原文は見せない」                          │
│                                                         │
│   ↓ 辛くなったら                                        │
│                                                         │
│   💬 AIカウンセリング                                   │
│   「一緒に整理しましょう」                              │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### 3つの画面

| 画面 | 目的 | トーン |
|------|------|--------|
| ポジティブダッシュボード | 応援を可視化、モチベUP | 明るい、温かい |
| ネガティブレポート | 状況把握、証拠整理 | 冷静、事実ベース |
| AIカウンセリング | 相談、気持ちの整理 | 寄り添い、共感 |

---

## 3. 機能一覧

### MVP機能（v1.0）

| # | 機能 | 説明 | 画面 |
|---|------|------|------|
| 1 | キーワード登録 | ハンドル、本名、ニックネーム等 | 設定 |
| 2 | エゴサ検索 | X APIでキーワード検索 | バックグラウンド |
| 3 | AI分類 | ポジティブ/ネガティブ/中立を判定 | バックグラウンド |
| 4 | ポジティブ表示 | 応援コメントを前面表示 | ポジティブダッシュボード |
| 5 | ネガティブ要約 | 原文は隠し、趣旨のみ表示 | ネガティブレポート |
| 6 | AIカウンセリング | コメントを元に相談 | カウンセリング |

### 後回し機能（v2.0以降）

| # | 機能 |
|---|------|
| 7 | ユーザー認証・ログイン |
| 8 | 定期監視（1日1回自動） |
| 9 | アラート通知（深刻な脅迫等） |
| 10 | 証拠保存・エクスポート |
| 11 | 決済（Stripe） |

---

## 4. 画面設計

### 4.1 ポジティブダッシュボード（メイン画面）

**目的：** 開いた瞬間に「応援されてる」と感じる

```
┌─────────────────────────────────────────────────────────┐
│  ☀️ あなたへの応援メッセージ                            │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  📊 今週のサマリー                                      │
│  ───────────────────────────────────────────────────── │
│  💬 言及数: 234件                                       │
│  😊 ポジティブ: 189件 (81%)  ████████████░░░            │
│  😐 中立: 32件 (14%)                                    │
│  😔 ネガティブ: 13件 (5%)                               │
│                                                         │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  💖 ピックアップ：今週届いた応援                        │
│                                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │ @fan_user1                                      │   │
│  │ 「今日の動画めっちゃ参考になりました！          │   │
│  │  いつもありがとうございます😊」                 │   │
│  │                                     ❤️ 45  🔁 3  │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │ @supporter_22                                   │   │
│  │ 「この人の説明が一番わかりやすい。              │   │
│  │  もっと早く知りたかった」                       │   │
│  │                                     ❤️ 128 🔁 12 │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
│  [もっと見る ↓]                                         │
│                                                         │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │ 🛡️ 心無いコメントについて                       │   │
│  │                                                 │   │
│  │ 今週13件のネガティブな言及がありました。        │   │
│  │ AIが内容を要約しています。                      │   │
│  │                                                 │   │
│  │ [レポートを見る →]                              │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### 4.2 ネガティブレポート

**目的：** 原文を見せず、趣旨だけ伝える

```
┌─────────────────────────────────────────────────────────┐
│  🛡️ ネガティブコメント レポート                         │
│  ← ダッシュボードに戻る                                 │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  ⚠️ このページについて                                  │
│  ─────────────────────────────────────────────────────  │
│  あなたの心を守るため、コメントの原文は表示しません。   │
│  AIが内容を要約・抽象化しています。                     │
│  原文の確認が必要な場合（法的対応等）は                 │
│  「証拠として保存」から取得できます。                   │
│                                                         │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  📋 今週のネガティブ言及（13件）                        │
│                                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │ 🔴 深刻度: 高                                   │   │
│  │                                                 │   │
│  │ 【要約】                                        │   │
│  │ あなたの発信内容の信頼性を否定する投稿。        │   │
│  │ 「詐欺」という表現が含まれています。            │   │
│  │                                                 │   │
│  │ カテゴリ: 名誉毀損の可能性                      │   │
│  │ 投稿日: 2026/02/13                              │   │
│  │ 拡散度: いいね23、RT5                           │   │
│  │                                                 │   │
│  │ [証拠として保存] [AIに相談する]                 │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │ 🟡 深刻度: 中                                   │   │
│  │                                                 │   │
│  │ 【要約】                                        │   │
│  │ あなたの能力・センスを批判する投稿。            │   │
│  │ 侮辱的な表現が含まれています。                  │   │
│  │                                                 │   │
│  │ カテゴリ: 人格攻撃                              │   │
│  │ 投稿日: 2026/02/12                              │   │
│  │ 拡散度: いいね8、RT1                            │   │
│  │                                                 │   │
│  │ [証拠として保存] [AIに相談する]                 │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │ 🟢 深刻度: 低                                   │   │
│  │                                                 │   │
│  │ 【要約】                                        │   │
│  │ あなたの意見に対する否定的な反応。              │   │
│  │ 批判の範囲内と思われます。                      │   │
│  │                                                 │   │
│  │ カテゴリ: 批判（許容範囲）                      │   │
│  │ 投稿日: 2026/02/11                              │   │
│  │ 拡散度: いいね2、RT0                            │   │
│  │                                                 │   │
│  │ [AIに相談する]                                  │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  💬 辛くなったら、AIカウンセラーに相談できます          │
│  [カウンセリングを始める →]                             │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### 4.3 AIカウンセリング

**目的：** 寄り添い、気持ちの整理を手伝う

```
┌─────────────────────────────────────────────────────────┐
│  💬 AIカウンセリング                                    │
│  ← 戻る                                                │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │ 🤖 カウンセラーAI                               │   │
│  │                                                 │   │
│  │ こんにちは。今日はどんなことを話しましょうか？  │   │
│  │                                                 │   │
│  │ 最近のコメントについて気になることがあれば、    │   │
│  │ 一緒に整理していきましょう。                    │   │
│  │                                                 │   │
│  │ 【よくある相談】                                │   │
│  │ • 批判と誹謗中傷の違いがわからない              │   │
│  │ • 特定のコメントが頭から離れない                │   │
│  │ • 法的対応すべきか迷っている                    │   │
│  │ • 発信を続けるモチベーションが下がっている      │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
│  ─────────────────────────────────────────────────────  │
│                                                         │
│  👤 ユーザー                                            │
│  ┌─────────────────────────────────────────────────┐   │
│  │ さっき見た「詐欺師」って言われてるやつ、        │   │
│  │ 結構ショックで...                               │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
│  🤖 カウンセラーAI                                      │
│  ┌─────────────────────────────────────────────────┐   │
│  │ それはショックですよね。                        │   │
│  │ 「詐欺師」という言葉は、あなたの誠実さを        │   │
│  │ 否定するような響きがありますから。              │   │
│  │                                                 │   │
│  │ 少し整理してみましょう。                        │   │
│  │                                                 │   │
│  │ そのコメントをした人は、                        │   │
│  │ • あなたのコンテンツをちゃんと見た上で          │   │
│  │   言っていますか？                              │   │
│  │ • それとも、見出しだけで判断していそうですか？  │   │
│  │                                                 │   │
│  │ どちらだと思いますか？                          │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │ メッセージを入力...                             │   │
│  │                                          [送信] │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

---

## 5. 技術設計

### 5.1 システム構成図

```
┌──────────────┐      ┌──────────────────────────────────────┐
│              │      │           Streamlit App              │
│    ユーザー   │──────▶│  ┌────────────────────────────────┐ │
│  （ブラウザ） │      │  │ ポジティブダッシュボード       │ │
│              │      │  │ ネガティブレポート             │ │
└──────────────┘      │  │ AIカウンセリング               │ │
                      │  └────────────────────────────────┘ │
                      └──────────────┬───────────────────────┘
                                     │
                    ┌────────────────┼────────────────┐
                    │                │                │
                    ▼                ▼                ▼
             ┌──────────┐     ┌──────────┐     ┌──────────┐
             │  X API   │     │ Claude   │     │ Claude   │
             │  検索    │     │ 分類     │     │ 相談     │
             └──────────┘     └──────────┘     └──────────┘
```

### 5.2 技術スタック

| レイヤー | 技術 | 理由 |
|----------|------|------|
| フロントエンド | Streamlit | 高速開発、リッチUI可能 |
| バックエンド | Python | Streamlitと統合 |
| X検索 | X API v2 | 従量課金で安い |
| AI分類 | Claude API (Haiku) | 安い・速い |
| AIカウンセリング | Claude API (Sonnet) | 共感力が必要 |
| ホスティング | Streamlit Cloud | 無料 |
| セッション管理 | Streamlit session_state | MVP用 |

### 5.3 ディレクトリ構成

```
slander-detector/
├── app.py                    # メインアプリ（ルーティング）
├── pages/
│   ├── 1_dashboard.py        # ポジティブダッシュボード
│   ├── 2_report.py           # ネガティブレポート
│   └── 3_counseling.py       # AIカウンセリング
├── lib/
│   ├── x_client.py           # X API呼び出し
│   ├── classifier.py         # 分類ロジック
│   ├── summarizer.py         # ネガティブコメント要約
│   └── counselor.py          # カウンセリングAI
├── prompts/
│   ├── classify.txt          # 分類プロンプト
│   ├── summarize.txt         # 要約プロンプト
│   └── counselor.txt         # カウンセラープロンプト
├── config.py
├── requirements.txt
├── .env
└── .gitignore
```

---

## 6. プロンプト設計

### 6.1 分類プロンプト

```
あなたはソーシャルメディア投稿の分類AIです。

【監視対象人物】
- Xアカウント: {x_handle}
- 名前: {real_name}
- ニックネーム: {nicknames}
- 活動内容: {activity}

【分析対象の投稿】
投稿者: @{author}
内容: {text}
投稿日時: {created_at}

【タスク】
1. この投稿が監視対象人物についての言及か判定
2. 感情・トーンを判定

【出力形式】JSONのみ出力
{
  "target_match": {
    "confidence": "HIGH/MEDIUM/LOW",
    "percentage": 0-100
  },
  "sentiment": {
    "category": "POSITIVE/NEUTRAL/NEGATIVE",
    "subcategory": "応援/感謝/質問/意見/批判/侮辱/脅迫/名誉毀損",
    "severity": 0-100
  },
  "is_display_worthy": true/false
}
```

### 6.2 要約プロンプト（ネガティブ用）

```
あなたはネガティブコメントを要約するAIです。
ユーザーの心を守るため、以下のルールに従ってください。

【ルール】
1. 原文の攻撃的な表現をそのまま使わない
2. 内容の「趣旨」だけを客観的に説明する
3. 侮辱的な言葉は「侮辱的な表現が含まれています」と抽象化する
4. 具体的な罵倒語は絶対に含めない

【入力】
原文: {original_text}
カテゴリ: {category}
深刻度: {severity}

【出力形式】
{
  "summary": "2-3文での要約",
  "category_label": "名誉毀損の可能性/人格攻撃/批判/その他",
  "severity_label": "高/中/低",
  "contains_threat": true/false,
  "recommended_action": "無視/記録のみ/法的相談を推奨"
}
```

### 6.3 カウンセラープロンプト

```
あなたは誹謗中傷に悩むクリエイターを支援するカウンセラーAIです。

【あなたの役割】
- 共感的に寄り添う
- 気持ちを整理する手伝いをする
- 批判と誹謗中傷の違いを一緒に考える
- 必要に応じて専門家への相談を勧める

【背景情報】
ユーザーは以下のようなコメントを受け取っています：
{recent_negative_comments_summary}

【ルール】
1. 「あなたは悪くない」と一方的に断定しない
2. 相手を一方的に悪者にしない
3. ユーザー自身が考えを整理できるよう質問する
4. 深刻な場合は専門家への相談を勧める
5. 法的アドバイスは行わない（「弁護士に相談を」と勧める）

【トーン】
- 温かく、寄り添う
- 押し付けがましくない
- 適度な距離感を保つ
```

---

## 7. データモデル

### MVP（メモリ上）

```python
from dataclasses import dataclass
from datetime import datetime
from typing import List, Optional

@dataclass
class Tweet:
    id: str
    text: str
    author_username: str
    author_name: str
    created_at: datetime
    url: str
    like_count: int
    retweet_count: int

@dataclass
class ClassificationResult:
    tweet: Tweet
    target_match_confidence: str       # HIGH/MEDIUM/LOW
    target_match_percentage: int       # 0-100
    sentiment_category: str            # POSITIVE/NEUTRAL/NEGATIVE
    sentiment_subcategory: str         # 応援/批判/侮辱等
    severity: int                      # 0-100
    is_display_worthy: bool            # ポジティブ表示対象か

@dataclass
class NegativeSummary:
    original_tweet: Tweet
    summary: str                       # 要約文
    category_label: str                # 名誉毀損の可能性等
    severity_label: str                # 高/中/低
    contains_threat: bool
    recommended_action: str

@dataclass
class AnalysisSession:
    keywords: List[str]
    searched_at: datetime
    total_count: int
    positive_tweets: List[ClassificationResult]
    neutral_tweets: List[ClassificationResult]
    negative_summaries: List[NegativeSummary]
```

---

## 8. 処理フロー

```
1. ユーザー入力
   │
   ├─ Xハンドル: @target
   ├─ 本名: 田中太郎
   ├─ ニックネーム: たなちゃん
   └─ 期間: 過去7日間
   │
   ▼
2. 検索クエリ生成
   │
   └─ "@target" OR "田中太郎" OR "たなちゃん" -from:target
   │
   ▼
3. X API 呼び出し
   │
   └─ 投稿リスト取得（最大100件）
   │
   ▼
4. Claude API で分類（バッチ処理）
   │
   ├─ POSITIVE → そのまま表示リストへ
   ├─ NEUTRAL → 非表示（カウントのみ）
   └─ NEGATIVE → 要約処理へ
   │
   ▼
5. ネガティブ投稿の要約
   │
   └─ 原文を隠し、趣旨のみの要約を生成
   │
   ▼
6. セッションに保存
   │
   ├─ positive_tweets
   ├─ neutral_tweets（カウントのみ）
   └─ negative_summaries
   │
   ▼
7. 画面表示
   │
   ├─ ダッシュボード: ポジティブ中心
   ├─ レポート: ネガティブ要約
   └─ カウンセリング: 会話履歴管理
```

---

## 9. コスト試算

### 1回の検索あたり

| 項目 | 単価 | 数量 | コスト |
|------|------|------|--------|
| X API 読み取り | $0.005/件 | 100件 | $0.50 |
| Claude Haiku（分類） | $0.00025/1K入力 | 〜50K | $0.0125 |
| Claude Haiku（要約） | $0.00025/1K入力 | 〜10K | $0.0025 |
| **小計（検索）** | | | **〜$0.52** |

### カウンセリング1セッション

| 項目 | 単価 | 数量 | コスト |
|------|------|------|--------|
| Claude Sonnet（相談） | $0.003/1K入力 | 〜20K | $0.06 |
| Claude Sonnet（出力） | $0.015/1K出力 | 〜5K | $0.075 |
| **小計（相談）** | | | **〜$0.14/往復** |

### 月間（1ユーザーが毎日使用）

- 検索: $0.52 × 30日 = $15.6
- 相談: $0.14 × 10回 = $1.4
- **合計: 約$17/月**
- 月額5,000円なら **粗利約2,500円/ユーザー**

---

## 10. MVP開発タスク

| # | タスク | 見積もり |
|---|--------|----------|
| 1 | プロジェクト初期化 | 15分 |
| 2 | X API クライアント実装 | 1時間 |
| 3 | 分類AI実装 | 1時間 |
| 4 | 要約AI実装 | 30分 |
| 5 | カウンセラーAI実装 | 1時間 |
| 6 | ポジティブダッシュボード画面 | 1.5時間 |
| 7 | ネガティブレポート画面 | 1時間 |
| 8 | カウンセリング画面 | 1.5時間 |
| 9 | 結合テスト・調整 | 1.5時間 |
| 10 | デプロイ | 30分 |
| **合計** | | **約10時間** |

---

## 11. 今後の拡張案（v2以降）

| 機能 | 説明 |
|------|------|
| 定期監視 | 1日1回自動でエゴサ |
| プッシュ通知 | 深刻な脅迫を即時通知 |
| 証拠エクスポート | PDF/CSV形式で保存 |
| 弁護士連携 | 提携弁護士への相談動線 |
| チーム機能 | 事務所・マネージャー向け |
| 複数SNS対応 | Instagram, YouTube |